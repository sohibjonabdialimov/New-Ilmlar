import{a as N,r as w,P as v,u as y,s as S,b as x,d as k,j as s,f as P,B as _,H as C,e as z}from"./index-nGmmVK93.js";import{t as B}from"./teacher_avatar-BnTJq1H-.js";import{S as M,f as T,N as G,a as p}from"./free-mode-CCMAUv7Z.js";import{N as L}from"./NewCourseCard-DsQj0LMy.js";import{u as O}from"./useQueries-CP01Rycc.js";import{S as V}from"./index-CprY9UvM.js";import{C as E}from"./CardSkeleton-B5ciU_zM.js";import{s as F}from"./profile-CfCOq-MM.js";import"./formatPrice-DC00fQPP.js";const W=()=>{const{id:t}=N(),{userData:i}=w.useContext(v),c=y(),[b,u]=S.useMessage(),{data:l,isLoading:f,refetch:g}=x(["GetSubscription",t],()=>k(t),{enabled:!!t&&!!(i!=null&&i.id)}),{data:r}=x(["GetTeacherAccount"],()=>z(t),{enabled:!!t}),m=a=>{i!=null&&i.id?P(a).then(()=>{g()}).catch(()=>{b.open({type:"error",content:s.jsx("h1",{className:"text-lg",children:"Xatolik yuz berdi. Saytni yangilab, boshidan urinib ko'ring"})})}):F.open({message:s.jsx("h2",{className:"font-medium",children:"Avval ro'yxatdan o'ting!"}),description:"Siz ro'yxatdan o'tgandan keyin obuna bo'la olasiz",placement:"top",duration:3,btn:s.jsx(_,{type:"primary",onClick:()=>c("/register"),children:"Ro'yxatdan o'tish"})})},e=r==null?void 0:r.data.data;console.log(e);const h=async a=>{const{data:o}=await C.get(`/api/courses/course/${a}/withouttoken`);return o},n=O(((e==null?void 0:e.courses)||[]).map(({id:a})=>({queryKey:["resource",a],queryFn:()=>h(a),enabled:!!a}))),j=n.some(a=>a.isLoading),d=n==null?void 0:n.map(a=>{var o;return(o=a==null?void 0:a.data)==null?void 0:o.data}).filter(a=>a!==void 0);return s.jsxs("div",{className:"py-7",children:[u,s.jsxs("div",{className:"flex justify-between sm:flex-row flex-col gap-5 mb-16",children:[s.jsxs("div",{className:"flex items-center sm:gap-5 gap-3",children:[s.jsx("img",{className:"sm:w-[142px] sm:h-[146px] w-[84px] h-[102px] sm:rounded-lg rounded-[5px] object-cover",src:e!=null&&e.profile_img?e==null?void 0:e.profile_img:B,alt:""}),s.jsxs("div",{className:"flex gap-1.5 justify-between flex-col",children:[s.jsxs("h1",{className:"text-main_color font-semibold sm:text-xl text-base mb-1",children:[e==null?void 0:e.first_name," ",e==null?void 0:e.last_name]}),s.jsx("p",{className:"text-[#758195] sm:text-base text-xs font-medium",children:e==null?void 0:e.spiceal}),s.jsxs("p",{className:"text-[#758195] sm:text-base text-xs font-semibold",children:["Kurslar soni:"," ",s.jsxs("span",{className:"font-normal",children:[e==null?void 0:e.courses.length," ta"]})]}),s.jsxs("p",{className:"text-[#758195] sm:text-base text-xs font-semibold",children:["Obunachilar soni:"," ",s.jsxs("span",{className:"font-normal",children:[e==null?void 0:e.subscribedStudentsCount," ta"]})]})]})]}),s.jsx("div",{className:"sm:w-auto w-full",children:f?s.jsx(V,{className:"p-1 rounded-2xl",width:120}):l!=null&&l.data.data.subscribed?s.jsx("button",{onClick:a=>{a.stopPropagation(),m(t)},className:"unbtn text-sm sm:p-[10px_30px] p-[8px_20px] w-full",children:"Obuna bo'lgansiz"}):s.jsx("button",{onClick:a=>{a.stopPropagation(),m(t)},className:"btn text-sm sm:p-[10px_30px] p-[8px_20px] w-full",children:"Obuna bo’lish"})})]}),s.jsxs("div",{className:"sm:p-6 p-4 bg-[#f1f2f466] rounded-[16px] sm:mb-16 mb-6",children:[s.jsx("h2",{className:"sm:text-3xl text-lg text-main_color font-semibold sm:mb-6 mb-2",children:"O'qituvchi haqida ma’lumot"}),s.jsx("p",{className:"sm:text-xl sm:leading-8 text-sm",children:"Explore Auto Layout in Figma, starting with horizontal, vertical, and wrap layouts. Manage padding, gaps, and alignment, and use constraints like fixed, hug, and fill for optimal sizing. Design navigation bars, top bars, headings, cards, and lists for mobile, tablet, and desktop. This course prepares you to create scalable and adaptable UI designs..."})]}),s.jsxs("div",{className:"relative mt-14 sm:mb-5 mb-10",children:[s.jsx("h1",{className:"title absolute top-0",children:"Kurslar"}),s.jsx(M,{slidesPerView:1.2,spaceBetween:10,navigation:!0,breakpoints:{640:{slidesPerView:2,spaceBetween:16},768:{slidesPerView:3,spaceBetween:16},1024:{slidesPerView:4,spaceBetween:16}},freeMode:!0,modules:[T,G],className:"mySwiper",children:j?[1,2,3,4].map(a=>s.jsx(p,{children:s.jsx(E,{})},a)):d==null?void 0:d.map(a=>s.jsx(p,{children:s.jsx(L,{item:a})},a.id))})]})]})};export{W as default};
