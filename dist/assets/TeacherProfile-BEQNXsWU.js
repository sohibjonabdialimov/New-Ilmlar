import{s as v,E as _,r as h,ay as P,u as H,b as f,D as w,j as e,F as t,H as i,x as o,aD as O,aC as L,A as k,aJ as q}from"./index-m-XM4rxM.js";import{t as z}from"./teacher_avatar-BnTJq1H-.js";import{N as A}from"./NewCourseCard-yE5SggOn.js";import{u as D}from"./useQueries-Br7_WsC6.js";import"./profile-CJRS_RRn.js";import"./index-Djsj2yfO.js";import"./formatPrice-DC00fQPP.js";const{TextArea:M}=o,B=()=>{const[m,E]=v.useMessage(),{control:n,getValues:j,setValue:l,reset:b}=_(),{userData:a,setUserData:g}=h.useContext(P),d=h.useRef(null),N=H(),I=async()=>{const s=j().EDITTEACHERPROFILE;O(s).then(()=>{x(),b(),m.open({type:"info",content:"Ma'lumotlar o'zgartirildi!"})}).catch(()=>{m.open({type:"error",content:"Xatolik kuzatildi!"})})},{refetch:x}=f(["GetUsersUsermeWithoutLocalStorage"],q,{onSuccess(s){g(s.data.data)}}),y=()=>{d.current&&d.current.click()},F=s=>{const c=s.target.files[0];c&&L({file:c}).then(()=>{R(),x(),m.open({type:"info",content:"Rasm o'zgartirildi"})}).catch(C=>{console.log(C),m.open({type:"error",content:"Rasm yuklashda xatolik bor"})})};h.useEffect(()=>{l("EDITTEACHERPROFILE.first_name",a.first_name),l("EDITTEACHERPROFILE.last_name",a.last_name),l("EDITTEACHERPROFILE.user_name",a.user_name),l("EDITTEACHERPROFILE.email",a.email),l("EDITTEACHERPROFILE.info",a.teacherMoreData.info),l("EDITTEACHERPROFILE.link",a.teacherMoreData.link),l("EDITTEACHERPROFILE.phone",a.teacherMoreData.phone),l("EDITTEACHERPROFILE.specialization",a.teacherMoreData.spiceal)},[a,l,x]);const{data:r,refetch:R}=f(["GetTeacherAccount"],()=>w(a==null?void 0:a.id),{enabled:!!(a!=null&&a.id)}),T=async s=>{const{data:c}=await k.get(`/api/courses/course/${s}/withouttoken`);return c},p=D(((r==null?void 0:r.data.data.courses)||[]).map(({id:s})=>({queryKey:["resource",s],queryFn:()=>T(s),enabled:!!s}))),u=p==null?void 0:p.map(s=>{var c;return(c=s==null?void 0:s.data)==null?void 0:c.data}).filter(s=>s!==void 0);return e.jsxs("div",{className:"py-7",children:[E,e.jsxs("div",{className:"flex sm:flex-row flex-col justify-between sm:mb-16 mb-10 gap-4",children:[e.jsxs("div",{className:"flex sm:gap-5 gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{className:"sm:w-[142px] sm:h-[142px] object-cover w-[90px] h-[90px] rounded-full",src:r!=null&&r.data.data.profile_img?r==null?void 0:r.data.data.profile_img:z,alt:"Ilmlar o'qituvchisining rasmi"}),e.jsx("div",{onClick:y,className:"border rounded-3xl translate-x-1/2 right-1/2 p-[4px_5px] inline-block absolute -bottom-3 text-xs text-white bg-[#262C36FF] cursor-pointer",children:"O'zgartirish"}),e.jsx("input",{type:"file",ref:d,className:"hidden",onChange:F})]}),e.jsxs("div",{className:"flex flex-col justify-center sm:gap-1 gap-0.5 py-0",children:[e.jsxs("h1",{className:"text-main_color font-semibold sm:text-xl text-base mb-0",children:[a==null?void 0:a.first_name," ",a==null?void 0:a.last_name]}),e.jsx("p",{className:"text-[#758195] sm:text-base text-xs font-medium",children:a==null?void 0:a.email}),e.jsxs("p",{className:"text-[#758195] sm:text-base text-xs font-semibold",children:["Username:"," ",e.jsx("span",{className:"font-normal",children:a==null?void 0:a.user_name})]})]})]}),e.jsx("div",{className:"sm:w-auto w-full",children:e.jsx("button",{onClick:()=>N("/upload-course"),className:"btn text-sm sm:p-[10px_30px] p-[8px_20px] w-full",children:"Kurs yuklash"})})]}),e.jsx("div",{className:"sm:p-6 p-4 bg-[#f1f2f466] rounded-[16px] sm:mb-16",children:e.jsx(t,{layout:"vertical",className:"sm:px-24 px-0 sm:pt-4 pt-2 pb-2 sm:pb-8 w-full",onSubmitCapture:s=>{s.preventDefault(),I()},children:e.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[e.jsxs("div",{className:"sm:col-span-1 col-span-2 grid grid-cols-2 gap-x-5",children:[e.jsx(t.Item,{className:"sm:col-span-1 col-span-2",label:e.jsx("span",{className:"text-secondary_color font-semibold text-base",children:"Ism"}),children:e.jsx(i,{rules:{required:"Field is required"},control:n,name:"EDITTEACHERPROFILE.first_name",render:({field:s})=>e.jsx(e.Fragment,{children:e.jsx(o,{...s,placeholder:"Ismingizni kiriting...",className:"w-full py-2.5 px-4 rounded-[10px]"})})})}),e.jsx(t.Item,{className:"sm:col-span-1 col-span-2",label:e.jsx("span",{className:"text-secondary_color font-semibold text-base",children:"Familiya"}),children:e.jsx(i,{rules:{required:"Field is required"},control:n,name:"EDITTEACHERPROFILE.last_name",render:({field:s})=>e.jsx(e.Fragment,{children:e.jsx(o,{...s,placeholder:"Familiyangizni kiriting...",className:"w-full py-2.5 px-4 rounded-[10px]"})})})}),e.jsx(t.Item,{className:"sm:col-span-1 col-span-2",label:e.jsx("span",{className:"text-secondary_color font-semibold text-base",children:"Foydalanuvchi nomi"}),children:e.jsx(i,{rules:{required:"Field is required"},control:n,name:"EDITTEACHERPROFILE.user_name",render:({field:s})=>e.jsx(e.Fragment,{children:e.jsx(o,{...s,placeholder:"Foydalanuvchi nomi",className:"w-full py-2.5 px-4 rounded-[10px]"})})})}),e.jsx(t.Item,{className:"sm:col-span-1 col-span-2",label:e.jsx("span",{className:"text-secondary_color font-semibold text-base",children:"Email"}),children:e.jsx(i,{rules:{required:"Field is required"},control:n,name:"EDITTEACHERPROFILE.email",render:({field:s})=>e.jsx(o,{...s,type:"email",placeholder:"user@gmail.com",className:"w-full py-2.5 px-5 rounded-[10px]"})})}),e.jsx(t.Item,{className:"sm:col-span-1 col-span-2",label:e.jsx("span",{className:"text-secondary_color font-semibold text-base",children:"Mutaxassislik"}),children:e.jsx(i,{rules:{required:"Field is required"},control:n,name:"EDITTEACHERPROFILE.specialization",render:({field:s})=>e.jsx(o,{...s,placeholder:"Ingliz tili o'qituvchisi, grafik dizayner",className:"w-full py-2.5 px-5 rounded-[10px]"})})}),e.jsx(t.Item,{className:"sm:col-span-1 col-span-2",label:e.jsx("span",{className:"text-secondary_color font-semibold text-base",children:"Havola"}),children:e.jsx(i,{rules:{required:"Field is required"},control:n,name:"EDITTEACHERPROFILE.link",render:({field:s})=>e.jsx(o,{...s,placeholder:"Havola",className:"w-full py-2.5 px-5 rounded-[10px]"})})})]}),e.jsxs("div",{className:"sm:col-span-1 col-span-2",children:[e.jsx(t.Item,{className:"sm:col-span-1 col-span-2",label:e.jsx("span",{className:"text-secondary_color font-semibold text-base",children:"O’zingiz haqingizda ma’lumot"}),children:e.jsx(i,{rules:{required:"Field is required"},control:n,name:"EDITTEACHERPROFILE.info",render:({field:s})=>e.jsx(e.Fragment,{children:e.jsx(M,{...s,placeholder:"O’zingiz haqingizda ma’lumot yozing...",className:"text-base",style:{height:80,resize:"none"}})})})}),e.jsx(t.Item,{className:"sm:col-span-1 col-span-2",label:e.jsx("span",{className:"text-secondary_color font-semibold text-base",children:"Telefon raqam"}),children:e.jsx(i,{rules:{required:"Field is required"},control:n,name:"EDITTEACHERPROFILE.phone",render:({field:s})=>e.jsx(e.Fragment,{children:e.jsx(o,{...s,type:"number",placeholder:"+998976367777",className:"w-full py-2.5 px-5 rounded-[10px]"})})})}),e.jsx("div",{children:e.jsx("button",{className:"btn text-sm p-[5px_25px]",children:"Profilni tahrirlash"})})]})]})})}),e.jsxs("div",{className:"relative mt-14 sm:mb-5 mb-10",children:[e.jsx("h1",{className:"title mb-8",children:"Kurslar"}),e.jsx("div",{className:"grid sm:grid-cols-4 grid-cols-1 justify-between w-full gap-5 gap-y-7",children:u==null?void 0:u.map(s=>e.jsx(A,{item:s,role:"teacher"},s.id))})]})]})};export{B as default};
