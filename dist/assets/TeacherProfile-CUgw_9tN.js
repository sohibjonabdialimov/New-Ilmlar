import{s as F,E as T,r as p,az as R,u as v,b as _,D as C,j as e,F as n,H as t,x as o,aE as w,aD as q,A as P}from"./index-B8td7unY.js";import{u as H,t as z}from"./teacher_avatar-C7gH-DrR.js";import{N as O}from"./NewCourseCard-C5T699I0.js";import"./profile-CJRS_RRn.js";import"./index-CkdTVInk.js";import"./formatPrice-DC00fQPP.js";const{TextArea:k}=o,U=()=>{const[u,f]=F.useMessage(),{control:i,getValues:j,setValue:c}=T(),{userData:l}=p.useContext(R),d=p.useRef(null),b=v(),g=async()=>{const s=j().EDITTEACHERPROFILE;w(s).then(a=>{console.log(a),h()}).catch(a=>{console.log(a)}),console.log(s)},E=()=>{d.current&&d.current.click()},N=s=>{const a=s.target.files[0];a&&q({file:a}).then(()=>{h(),u.open({type:"info",content:"Rasm o'zgartirildi"})}).catch(y=>{console.log(y),u.open({type:"error",content:"Rasm yuklashda xatolik bor"})})};p.useEffect(()=>{c("EDITTEACHERPROFILE.first_name",l.first_name),c("EDITTEACHERPROFILE.last_name",l.last_name),c("EDITTEACHERPROFILE.email",l.email)},[l,c]);const{data:r,refetch:h}=_(["GetTeacherAccount"],()=>C(l==null?void 0:l.id),{enabled:!!(l!=null&&l.id)}),I=async s=>{const{data:a}=await P.get(`/api/courses/course/${s}/withouttoken`);return a},m=H(((r==null?void 0:r.data.data.courses)||[]).map(({id:s})=>({queryKey:["resource",s],queryFn:()=>I(s),enabled:!!s}))),x=m==null?void 0:m.map(s=>{var a;return(a=s==null?void 0:s.data)==null?void 0:a.data}).filter(s=>s!==void 0);return e.jsxs("div",{className:"py-7",children:[f,e.jsxs("div",{className:"flex sm:flex-row flex-col justify-between sm:mb-16 mb-10 gap-4",children:[e.jsxs("div",{className:"flex sm:gap-5 gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{className:"sm:w-[142px] sm:h-[142px] object-cover w-[90px] h-[90px] rounded-full",src:r!=null&&r.data.data.profile_img?r==null?void 0:r.data.data.profile_img:z,alt:"Ilmlar o'qituvchisining rasmi"}),e.jsx("div",{onClick:E,className:"border rounded-3xl translate-x-1/2 right-1/2 p-[4px_5px] inline-block absolute -bottom-3 text-xs text-white bg-[#262C36FF] cursor-pointer",children:"O'zgartirish"}),e.jsx("input",{type:"file",ref:d,className:"hidden",onChange:N})]}),e.jsxs("div",{className:"flex flex-col justify-center sm:gap-1 gap-0.5 py-0",children:[e.jsxs("h1",{className:"text-main_color font-semibold sm:text-xl text-base mb-0",children:[l==null?void 0:l.first_name," ",l==null?void 0:l.last_name]}),e.jsx("p",{className:"text-[#758195] sm:text-base text-xs font-medium",children:l==null?void 0:l.email}),e.jsxs("p",{className:"text-[#758195] sm:text-base text-xs font-semibold",children:["Username:"," ",e.jsx("span",{className:"font-normal",children:l==null?void 0:l.user_name})]})]})]}),e.jsx("div",{className:"sm:w-auto w-full",children:e.jsx("button",{onClick:()=>b("/upload-course"),className:"btn text-sm sm:p-[10px_30px] p-[8px_20px] w-full",children:"Kurs yuklash"})})]}),e.jsx("div",{className:"sm:p-6 p-4 bg-[#f1f2f466] rounded-[16px] sm:mb-16",children:e.jsx(n,{layout:"vertical",className:"sm:px-24 px-0 sm:pt-4 pt-2 pb-2 sm:pb-8 w-full",onSubmitCapture:s=>{s.preventDefault(),g()},children:e.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[e.jsxs("div",{className:"sm:col-span-1 col-span-2 grid grid-cols-2 gap-x-5",children:[e.jsx(n.Item,{className:"sm:col-span-1 col-span-2",label:e.jsx("span",{className:"text-secondary_color font-semibold text-base",children:"Ism"}),children:e.jsx(t,{rules:{required:"Field is required"},control:i,name:"EDITTEACHERPROFILE.first_name",render:({field:s})=>e.jsx(e.Fragment,{children:e.jsx(o,{...s,placeholder:"Ismingizni kiriting...",className:"w-full py-2.5 px-4 rounded-[10px]"})})})}),e.jsx(n.Item,{className:"sm:col-span-1 col-span-2",label:e.jsx("span",{className:"text-secondary_color font-semibold text-base",children:"Familiya"}),children:e.jsx(t,{rules:{required:"Field is required"},control:i,name:"EDITTEACHERPROFILE.last_name",render:({field:s})=>e.jsx(e.Fragment,{children:e.jsx(o,{...s,placeholder:"Familiyangizni kiriting...",className:"w-full py-2.5 px-4 rounded-[10px]"})})})}),e.jsx(n.Item,{className:"sm:col-span-1 col-span-2",label:e.jsx("span",{className:"text-secondary_color font-semibold text-base",children:"Foydalanuvchi nomi"}),children:e.jsx(t,{rules:{required:"Field is required"},control:i,name:"EDITTEACHERPROFILE.user_name",render:({field:s})=>e.jsx(e.Fragment,{children:e.jsx(o,{...s,placeholder:"Foydalanuvchi nomi",className:"w-full py-2.5 px-4 rounded-[10px]"})})})}),e.jsx(n.Item,{className:"sm:col-span-1 col-span-2",label:e.jsx("span",{className:"text-secondary_color font-semibold text-base",children:"Email"}),children:e.jsx(t,{rules:{required:"Field is required"},control:i,name:"EDITTEACHERPROFILE.email",render:({field:s})=>e.jsx(o,{...s,type:"email",placeholder:"user@gmail.com",className:"w-full py-2.5 px-5 rounded-[10px]"})})}),e.jsx(n.Item,{className:"sm:col-span-1 col-span-2",label:e.jsx("span",{className:"text-secondary_color font-semibold text-base",children:"Mutaxassislik"}),children:e.jsx(t,{rules:{required:"Field is required"},control:i,name:"EDITTEACHERPROFILE.specialization",render:({field:s})=>e.jsx(o,{...s,placeholder:"Ingliz tili o'qituvchisi, grafik dizayner",className:"w-full py-2.5 px-5 rounded-[10px]"})})}),e.jsx(n.Item,{className:"sm:col-span-1 col-span-2",label:e.jsx("span",{className:"text-secondary_color font-semibold text-base",children:"Havola"}),children:e.jsx(t,{rules:{required:"Field is required"},control:i,name:"EDITTEACHERPROFILE.link",render:({field:s})=>e.jsx(o,{...s,placeholder:"Havola",className:"w-full py-2.5 px-5 rounded-[10px]"})})})]}),e.jsxs("div",{className:"sm:col-span-1 col-span-2",children:[e.jsx(n.Item,{className:"sm:col-span-1 col-span-2",label:e.jsx("span",{className:"text-secondary_color font-semibold text-base",children:"O’zingiz haqingizda ma’lumot"}),children:e.jsx(t,{rules:{required:"Field is required"},control:i,name:"EDITTEACHERPROFILE.info",render:({field:s})=>e.jsx(e.Fragment,{children:e.jsx(k,{...s,placeholder:"O’zingiz haqingizda ma’lumot yozing...",className:"text-base",style:{height:80,resize:"none"}})})})}),e.jsx(n.Item,{className:"sm:col-span-1 col-span-2",label:e.jsx("span",{className:"text-secondary_color font-semibold text-base",children:"Telefon raqam"}),children:e.jsx(t,{rules:{required:"Field is required"},control:i,name:"EDITTEACHERPROFILE.phone",render:({field:s})=>e.jsx(e.Fragment,{children:e.jsx(o,{...s,type:"number",placeholder:"+998976367777",className:"w-full py-2.5 px-5 rounded-[10px]"})})})}),e.jsx("div",{children:e.jsx("button",{className:"btn text-sm p-[5px_25px]",children:"Profilni tahrirlash"})})]})]})})}),e.jsxs("div",{className:"relative mt-14 sm:mb-5 mb-10",children:[e.jsx("h1",{className:"title mb-8",children:"Kurslar"}),e.jsx("div",{className:"grid sm:grid-cols-4 grid-cols-1 justify-between w-full gap-5 gap-y-7",children:x==null?void 0:x.map(s=>e.jsx(O,{item:s,role:"teacher"},s.id))})]})]})};export{U as default};
